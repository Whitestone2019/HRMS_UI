<div class="modal" *ngIf="isModalOpen">
  <div class="modal-content">
    <div class="modal-header">
      <h4>Apply Leave</h4>
      <button class="close-btn" (click)="closeModal()">&times;</button>
    </div>
    <div class="modal-body">
      <form [formGroup]="leaveForm" (ngSubmit)="submitForm()">
        <!-- Employee ID -->
        <div class="form-group">
          <label for="empid">Employee ID <span class="required">*</span></label>
          <input type="text" id="empid" formControlName="empid" name="empid" readonly />
          <div class="error" *ngIf="leaveForm.get('empid')?.touched && leaveForm.get('empid')?.invalid">
            <span style="color: red;">Employee ID is required.</span>
          </div>
        </div>

        <!-- Leave Type -->
        <div class="form-group">
          <input type="hidden" id="aj" formControlName="aj">
          <label for="leavetype">Leave Type <span style="color: red;">*</span></label>
          <select id="leavetype" (click)="$event.stopPropagation()" formControlName="leavetype" required>
            <option value="" selected>Select</option>
            <option *ngFor="let type of leaveTypes" [value]="type">{{ type }}</option>
          </select>
          <div *ngIf="leaveForm.get('leavetype')?.touched && leaveForm.get('leavetype')?.invalid" class="error">
            <span style="color: red;">Please select a leave type.</span>
          </div>
        </div>

        <!-- Date Range -->
        <div class="form-group">
          <label for="date">Date <span style="color: red;">*</span></label>
          <div class="date-group">
            <input type="date" id="start-date" formControlName="startDate" (change)="calculatenoofdays()" required>
            <input type="date" id="end-date" formControlName="endDate" (change)="calculatenoofdays()" required>
          </div>
          <div *ngIf="leaveForm.get('startDate')?.touched && leaveForm.get('startDate')?.invalid" class="error">
            <span style="color: red;">Please select a start date.</span>
          </div>
          <div *ngIf="leaveForm.get('endDate')?.touched && leaveForm.get('endDate')?.invalid" class="error">
            <span style="color: red;">Please select an end date.</span>
          </div>
        </div>

        <!-- No. of Days -->
        <div class="form-group">
          <label for="noofdays">No. of Days</label>
          <input type="text" id="noofdays" formControlName="noofdays" readonly />
        </div>

  <!-- Team Email -->
<div class="form-group">
  <label for="teamemail">Manager Email ID <span style="color: red;">*</span></label>
  <input type="email" id="teamemail" formControlName="teamemail" readonly>
  
  <div *ngIf="leaveForm.get('teamemail')?.touched" class="error">
    <span *ngIf="leaveForm.get('teamemail')?.errors?.['required']" style="color: red;">This field is mandatory.</span>
    <span *ngIf="leaveForm.get('teamemail')?.errors?.['email']" style="color: red;">Please enter a valid email.</span>
  </div>
</div>


        <!-- Reason for Leave -->
        <div class="form-group">
          <label for="leavereason">Reason for Leave <span style="color: red;">*</span></label>
          <textarea id="leavereason" formControlName="leavereason" rows="4" required></textarea>
          <div *ngIf="leaveForm.get('leavereason')?.touched && leaveForm.get('leavereason')?.invalid" class="error">
            <span style="color: red;">Please Enter Reason for Leave.</span>
          </div>
        </div>

        <!-- Submit and Cancel Buttons -->
        <div class="modal-footer">
          <button class="btn-submit" type="submit">Submit</button>
          <button class="btn-cancel" type="button" (click)="closeModal()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
