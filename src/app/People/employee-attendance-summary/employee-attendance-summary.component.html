<div class="content">
  <div class="top-bar">
    <div class="date-range">
      <label for="fromDate">From:</label>
      <input id="fromDate" type="date" [(ngModel)]="startDate" />

      <label for="toDate">To:</label>
      <input id="toDate" type="date" [(ngModel)]="endDate" />

      <button (click)="getAttendanceDetails()">Fetch Attendance</button>
    </div>

    <!-- Sort Toggle Button -->
    <button class="sort-toggle-btn" (click)="toggleSortOrder()" 
            *ngIf="attendanceData.length > 0">
      Sort by Date: {{ sortOrder === 'desc' ? 'Newest First' : 'Oldest First' }}
    </button>
  </div>

  <!-- Search Filter -->
  <div class="search-bar" *ngIf="attendanceData.length > 0">
    <input
      type="text"
      placeholder="Search by Employee ID or Name"
      [(ngModel)]="searchTerm"
      (input)="applyFilter()"
    />
  </div>

  <div class="attendance-details">
    <table class="attendance-table" *ngIf="paginatedAttendanceData.length > 0">
      <thead>
        <tr>
          <th>S.No</th>
          <th>Emp_Id</th>
          <th>Emp_Name</th>
          <th>Attendance Date</th>
          <th>Status</th>
          <th>Check-In</th>
          <th>Check-Out</th>
          <th>Hours Worked</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of paginatedAttendanceData; let i = index">
          <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
          <td>{{ record.employeeId }}</td>
          <td>{{ record.employeeName }}</td>
          <td>{{ record.attendanceDate }}</td>
          <td>{{ record.status }}</td>
          <td>{{ record.checkIn }}</td>
          <td>{{ record.checkOut }}</td>
          <td>{{ record.hoursWorked || '-' }}</td>
        </tr>
      </tbody>
    </table>

    <p *ngIf="attendanceData.length === 0">Please select dates and fetch attendance data.</p>
    <p *ngIf="attendanceData.length > 0 && paginatedAttendanceData.length === 0">
      No records match your search.
    </p>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalRecords > itemsPerPage">
    <button (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
    <span>Page {{ currentPage }} of {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
  </div>
</div>