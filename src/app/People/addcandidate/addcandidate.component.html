<!-- Radio Buttons -->
<div class="form-mode-toggle" style="display: none;">
  <label>
    <input type="radio" name="mode" [(ngModel)]="isEditable" [value]="true" /> A (Editable)
  </label>
  <label>
    <input type="radio" name="mode" [(ngModel)]="isEditable" [value]="false" /> B (Read-only)
  </label>
</div>

<!-- Display success message -->
<div *ngIf="successMessage" class="alert alert-success">
  {{ successMessage }}
</div>

<form (ngSubmit)="onSubmit1(candidateForm)" #candidateForm="ngForm" novalidate>
  <div class="form-section1">
    
    <!-- ==================== PROFILE DETAILS ==================== -->
    <div class="form-section">
      <h2>Profile Details</h2>

      <div class="form-row">
        <div class="form-column">
          <label>Employee ID <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.empid" name="empid" [disabled]="!isEditable" required />
        </div>
        <div class="form-column">
          <label>Full Name (Auto)</label>
          <input type="text" [value]="candidateDetails.firstName + ' ' + candidateDetails.lastName" disabled />
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>First Name <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.firstName" name="firstName" [disabled]="!isEditable" required />
        </div>
        <div class="form-column">
          <label>Last Name <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.lastName" name="lastName" [disabled]="!isEditable" required />
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Date of Birth <span class="mandatory">*</span></label>
          <input type="date" [(ngModel)]="candidateDetails.dateofbirth" name="dateofbirth" [disabled]="!isEditable" required />
        </div>
        <div class="form-column">
          <label>Blood Group <span class="mandatory">*</span></label>
          <select (click)="$event.stopPropagation()" [(ngModel)]="candidateDetails.bloodgroup" name="bloodgroup"
            [disabled]="!isEditable" required>
            <option value="">Select</option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Gender <span class="mandatory">*</span></label>
          <select (click)="$event.stopPropagation()" [(ngModel)]="candidateDetails.gender" name="gender"
            [disabled]="!isEditable" required>
            <option value="">Select</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div class="form-column">
          <label>Marital Status <span class="mandatory">*</span></label>
          <select (click)="$event.stopPropagation()" [(ngModel)]="candidateDetails.maritalstatus" name="maritalstatus"
            [disabled]="!isEditable" required>
            <option value="">Select</option>
            <option value="Single">Single</option>
            <option value="Married">Married</option>
            <option value="Divorced">Divorced</option>
            <option value="Widowed">Widowed</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Nationality</label>
          <input type="text" [(ngModel)]="candidateDetails.nationality" name="nationality" value="Indian" [disabled]="!isEditable" />
        </div>
        <div class="form-column">
          <label>UAN Number</label>
          <input type="text" [(ngModel)]="candidateDetails.uannumber" name="uannumber" [disabled]="!isEditable" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Aadhaar Number <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.aadhaarnumber" name="aadhaarnumber" [disabled]="!isEditable"
            required maxlength="12" placeholder="1234 5678 9012" />
        </div>
        <div class="form-column">
          <label>PAN Number <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.pannumber" name="pannumber" [disabled]="!isEditable" required
            maxlength="10" placeholder="ABCDE1234F" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Passport Number</label>
          <input *ngIf="isEditable" type="text" [(ngModel)]="candidateDetails.passportnumber" name="passportnumber"
            placeholder="e.g. A1234567" style="text-transform: uppercase;" />
          <span *ngIf="!isEditable">{{ candidateDetails.passportnumber || 'Not Provided' }}</span>
        </div>
        <div class="form-column">
          <label>Driving License Number</label>
          <input *ngIf="isEditable" type="text" [(ngModel)]="candidateDetails.drivinglicense" name="drivinglicense"
            placeholder="e.g. TN0720230012345" />
          <span *ngIf="!isEditable">{{ candidateDetails.drivinglicense || 'Not Provided' }}</span>
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>ESI Number</label>
          <input *ngIf="isEditable" type="text" [(ngModel)]="candidateDetails.esinumber" name="esinumber"
            placeholder="e.g. 1234567890" />
          <span *ngIf="!isEditable">{{ candidateDetails.esinumber || 'Not Provided' }}</span>
        </div>
      </div>
    </div>

    <!-- ==================== CONTACT INFORMATION ==================== -->
    <div class="form-section">
      <h2>Contact Information</h2>
      <div class="form-row">
        <div class="form-column">
          <label>Personal Email <span class="mandatory">*</span></label>
          <input type="email" [(ngModel)]="candidateDetails.emailid" name="emailid" [disabled]="!isEditable" required />
        </div>
        <div class="form-column">
          <label>Personal Mobile <span class="mandatory">*</span></label>
          <input type="tel" [(ngModel)]="candidateDetails.mobileNumber" name="mobileNumber" [disabled]="!isEditable" required />
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Alternate Mobile</label>
          <input type="tel" [(ngModel)]="candidateDetails.alternatemobilenumber" name="alternatemobnum" [disabled]="!isEditable" />
        </div>
        <div class="form-column">
          <label>Official Email</label>
          <input type="email" [(ngModel)]="candidateDetails.officialemail" name="officialemail" [disabled]="!isEditable" />
        </div>
      </div>
    </div>

    <!-- ==================== EMERGENCY CONTACT ==================== -->
    <div class="form-section">
      <h2>Emergency Contact</h2>
      <div class="form-row">
        <div class="form-column">
          <label>Name <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.emergencycontactname" name="emergencyname" required [disabled]="!isEditable" />
        </div>
        <div class="form-column">
          <label>Number <span class="mandatory">*</span></label>
          <input type="tel" [(ngModel)]="candidateDetails.emergencycontactnumber" name="emergencynum" required [disabled]="!isEditable" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-column">
          <label>Relationship <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.emergencycontactrelation" name="emergencyrelation" required [disabled]="!isEditable" />
        </div>
      </div>
    </div>

    <!-- ==================== EMPLOYMENT DETAILS ==================== -->
    <div class="form-section">
      <h2>Employment Details</h2>
      <div class="form-row">
        <div class="form-column">
          <label>Date of Joining <span class="mandatory">*</span></label>
          <input type="date" [(ngModel)]="candidateDetails.dateofjoining" name="dateofjoining" required [disabled]="!isEditable" />
        </div>
        <div class="form-column">
          <label>Designation <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.designation" name="designation" required [disabled]="!isEditable" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Department / Project <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.department" name="department" required [disabled]="!isEditable" />
        </div>
        <div class="form-column">
          <label>Work Location <span class="mandatory">*</span></label>
          <select (click)="$event.stopPropagation()" [(ngModel)]="candidateDetails.worklocation" name="worklocation"
            required [disabled]="!isEditable">
            <option value="">Select</option>
            <option value="Onsite">Onsite</option>
            <option value="Offsite">Offsite</option>
            <option value="Hybrid">Hybrid</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Reporting Manager <span class="mandatory">*</span></label>
          <select (click)="$event.stopPropagation()" [(ngModel)]="candidateDetails.reportingmanager" name="reportingmanager" required
            [disabled]="!isEditable">
            <option value="">Select Manager</option>
            <option *ngFor="let mgr of managers" [value]="mgr.empid">
              {{ mgr.firstname }} {{ mgr.lastname || '' }} ({{ mgr.empid }})
            </option>
          </select>
        </div>
      </div>
    </div>

    <!-- ==================== PRESENT ADDRESS ==================== -->
    <div class="form-section">
      <h3>Present Address</h3>

      <div class="form-row">
        <div class="form-column">
          <label>Address Line 1 <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.presentaddressline1" name="presentaddressline1" required
            [disabled]="!isEditable" placeholder="House No, Street, Area" />
        </div>
        <div class="form-column">
          <label>Address Line 2</label>
          <input type="text" [(ngModel)]="candidateDetails.presentaddressline2" name="presentaddressline2"
            [disabled]="!isEditable" placeholder="Landmark (Optional)" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>City / Town <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.presentcity" name="presentcity" required [disabled]="!isEditable" />
        </div>
        <div class="form-column">
          <label>State <span class="mandatory">*</span></label>
          <select [(ngModel)]="candidateDetails.presentstate" name="presentstate" required [disabled]="!isEditable"
            (click)="$event.stopPropagation()">
            <option value="">Select State</option>
            <option *ngFor="let state of states" [value]="state">{{ state }}</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Postal Code / PIN <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.presentpostalcode" name="presentpostalcode" required
            maxlength="6" [disabled]="!isEditable" />
        </div>
        <div class="form-column">
          <label>Country</label>
          <input type="text" [(ngModel)]="candidateDetails.presentcountry" name="presentcountry" value="India" [disabled]="true" />
        </div>
      </div>
    </div>

    <!-- ==================== SAME AS PRESENT ADDRESS CHECKBOX ==================== -->
    <div class="form-section" style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 8px;">
      <label style="font-weight: bold; cursor: pointer;">
        <input type="checkbox" [(ngModel)]="sameAsPresentAddress" name="sameAsPresentAddress" (change)="toggleAddress()"
          [disabled]="!isEditable" />
        <span style="margin-left: 8px; color: #2c3e50;">Same as Present Address</span>
      </label>
    </div>

    <!-- ==================== PERMANENT ADDRESS ==================== -->
    <div class="form-section">
      <h3>Permanent Address</h3>

      <div class="form-row">
        <div class="form-column">
          <label>Address Line 1 <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.permanentaddressline1" name="permanentaddressline1" required
            [disabled]="!isEditable" placeholder="House No, Street, Area" />
        </div>
        <div class="form-column">
          <label>Address Line 2</label>
          <input type="text" [(ngModel)]="candidateDetails.permanentaddressline2" name="permanentaddressline2"
            [disabled]="!isEditable" placeholder="Landmark (Optional)" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>City / Town <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.permanentcity" name="permanentcity" required [disabled]="!isEditable" />
        </div>
        <div class="form-column">
          <label>State <span class="mandatory">*</span></label>
          <select [(ngModel)]="candidateDetails.permanentstate" name="permanentstate" required [disabled]="!isEditable"
            (click)="$event.stopPropagation()">
            <option value="">Select State</option>
            <option *ngFor="let state of states" [value]="state">{{ state }}</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>Postal Code / PIN <span class="mandatory">*</span></label>
          <input type="text" [(ngModel)]="candidateDetails.permanentpostalcode" name="permanentpostalcode" required
            maxlength="6" [disabled]="!isEditable" />
        </div>
        <div class="form-column">
          <label>Country</label>
          <input type="text" [(ngModel)]="candidateDetails.permanentcountry" name="permanentcountry" value="India" [disabled]="true" />
        </div>
      </div>
    </div>

    <!-- ==================== EDUCATION SECTION ==================== -->
    <div class="form-section">
      <h3>Education <span class="mandatory">*</span></h3>
      <button type="button" (click)="addEducation()" [disabled]="!isEditable">Add Row</button>
      <table>
        <thead>
          <tr>
            <th>Institution Name</th>
            <th>Qualification</th>
            <th>Register No</th>
            <th>Percentage</th>
            <th>Duration</th>
            <th>Field(s) of Study</th>
            <th>Year of Graduation</th>
            <th>Additional Notes</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let edu of educationList; let i = index">
            <td><input type="text" [(ngModel)]="edu.institution" [name]="'edu_institution_' + i" required [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="edu.qualification" [name]="'edu_qualification_' + i" required [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="edu.regnum" [name]="'edu_regnum_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="edu.percentage" [name]="'edu_percentage_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="edu.duration" [name]="'edu_duration_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="edu.fieldofstudy" [name]="'edu_field_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="edu.yearofgraduation" [name]="'edu_year_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="edu.additionalnotes" [name]="'edu_notes_' + i" [disabled]="!isEditable" /></td>
            <td><button type="button" (click)="removeEdu(i)" class="delete-btn" [disabled]="!isEditable">Remove</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ==================== PROFESSIONAL DETAILS SECTION ==================== -->
    <div class="form-section">
      <h3>Professional Details</h3>
      <button type="button" (click)="addProfessional()" [disabled]="!isEditable">Add Row</button>
      <table>
        <thead>
          <tr>
            <th>Organization</th>
            <th>Location</th>
            <th>Org Emp ID</th>
            <th>Org Dept</th>
            <th>Org Role</th>
            <th>Joining Date</th>
            <th>Relieving Date</th>
            <th>CTC</th>
            <th>Additional Information</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let prof of professionalList; let i = index">
            <td><input type="text" [(ngModel)]="prof.organisation" [name]="'prof_org_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="prof.location" [name]="'prof_loc_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="prof.orgempid" [name]="'prof_empid_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="prof.orgdept" [name]="'prof_dept_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="prof.orgrole" [name]="'prof_role_' + i" [disabled]="!isEditable" /></td>
            <td><input type="date" [(ngModel)]="prof.joiningdate" [name]="'prof_join_' + i" [disabled]="!isEditable" /></td>
            <td><input type="date" [(ngModel)]="prof.relievingdate" [name]="'prof_relieve_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="prof.ctc" [name]="'prof_ctc_' + i" [disabled]="!isEditable" /></td>
            <td><textarea [(ngModel)]="prof.additionalinformation" [name]="'prof_info_' + i" rows="2" [disabled]="!isEditable"></textarea></td>
            <td><button type="button" (click)="removeProfessional(i)" class="delete-btn" [disabled]="!isEditable">Remove</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ==================== SKILL SET SECTION ==================== -->
    <div class="form-section">
      <h3>Skill Set <span class="mandatory">*</span></h3>
      <button type="button" (click)="addSkill()" [disabled]="!isEditable">Add Row</button>
      <table>
        <thead>
          <tr>
            <th>Skill</th>
            <th>Proficiency</th>
            <th>Certification</th>
            <th>Years of Experience</th>
            <th>Last Update</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let skill of skillList; let i = index">
            <td><input type="text" [(ngModel)]="skill.skill" [name]="'skill_name_' + i" required [disabled]="!isEditable" /></td>
            <td>
              <select [(ngModel)]="skill.proficiencylevel" [name]="'skill_prof_' + i" required [disabled]="!isEditable" (click)="$event.stopPropagation()">
                <option value="">Select</option>
                <option value="Beginner">Beginner</option>
                <option value="Intermediate">Intermediate</option>
                <option value="Advanced">Advanced</option>
                <option value="Expert">Expert</option>
              </select>
            </td>
            <td><input type="text" [(ngModel)]="skill.certification" [name]="'skill_cert_' + i" [disabled]="!isEditable" /></td>
            <td><input type="text" [(ngModel)]="skill.yearsExperience" [name]="'skill_years_' + i" [disabled]="!isEditable" /></td>
            <td><input type="date" [(ngModel)]="skill.lastupdated" [name]="'skill_last_' + i" [disabled]="!isEditable" /></td>
            <td><button type="button" (click)="removeSkill(i)" class="delete-btn" [disabled]="!isEditable">Remove</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ==================== DOCUMENT UPLOADS (Editable Mode) ==================== -->
    <div class="form-section" *ngIf="isEditable">
      <h2>Document Uploads <span class="mandatory">*</span></h2>

      <div class="form-row">
        <div class="form-column">
          <label>Passport Size Photo <span class="mandatory">*</span></label>
          <input type="file" (change)="onFileSelected($event, 'photo')" accept="image/*" />
          <small *ngIf="photoFile?.name" class="uploaded-file-name">Uploaded: {{ photoFile?.name }}</small>
        </div>
        <div class="form-column">
          <label>Aadhar Card <span class="mandatory">*</span></label>
          <input type="file" (change)="onFileSelected($event, 'aadhar')" accept=".pdf,image/*" />
          <small *ngIf="aadharFile?.name" class="uploaded-file-name">Uploaded: {{ aadharFile?.name }}</small>
        </div>
        <div class="form-column">
          <label>PAN Card <span class="mandatory">*</span></label>
          <input type="file" (change)="onFileSelected($event, 'pan')" accept=".pdf,image/*" />
          <small *ngIf="panFile?.name" class="uploaded-file-name">Uploaded: {{ panFile?.name }}</small>
        </div>
      </div>

      <div class="form-row">
        <div class="form-column">
          <label>10th Marksheet <span class="mandatory">*</span></label>
          <input type="file" (change)="onFileSelected($event, 'tenth')" accept=".pdf,image/*" />
          <small *ngIf="tenthFile?.name" class="uploaded-file-name">Uploaded: {{ tenthFile?.name }}</small>
        </div>
        <div class="form-column">
          <label>12th / Diploma Marksheet <span class="mandatory">*</span></label>
          <input type="file" (change)="onFileSelected($event, 'twelfth')" accept=".pdf,image/*" />
          <small *ngIf="twelfthFile?.name" class="uploaded-file-name">Uploaded: {{ twelfthFile?.name }}</small>
        </div>
        <div class="form-column">
          <label>Degree Certificate (UG/PG) <span class="mandatory">*</span></label>
          <input type="file" (change)="onFileSelected($event, 'degree')" accept=".pdf,image/*" />
          <small *ngIf="degreeFile?.name" class="uploaded-file-name">Uploaded: {{ degreeFile?.name }}</small>
        </div>
      </div>
    </div>

    <!-- ==================== EXISTING DOCUMENT PREVIEWS (Edit Mode) ==================== -->
    <div class="form-section" *ngIf="isEditable && candidateDetails?.documents">
      <h2>Currently Uploaded Documents</h2>
      <p class="text-muted">You can replace any document by uploading a new one below.</p>

      <div class="documents-grid">
        <!-- Photo -->
        <div class="doc-card" *ngIf="candidateDetails.documents.photo?.url">
          <div class="doc-header">
            <i class="fas fa-user"></i> Passport Size Photo
          </div>
          <div class="doc-body">
            <img [src]="candidateDetails.documents.photo.url" class="photo-preview" alt="Current Photo">
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.photo)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.photo)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.photo?.name }}">{{ existingFiles.photo?.name || 'photo.jpg' }}</small>
          </div>
        </div>

        <!-- Aadhar -->
        <div class="doc-card" *ngIf="candidateDetails.documents.aadhar?.url">
          <div class="doc-header">
            <i class="fas fa-id-card"></i> Aadhar Card
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.aadhar?.name }}">
              {{ existingFiles.aadhar?.name || 'aadhar.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.aadhar)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.aadhar)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.aadhar?.name }}">{{ existingFiles.aadhar?.name || 'aadhar.pdf' }}</small>
          </div>
        </div>

        <!-- PAN -->
        <div class="doc-card" *ngIf="candidateDetails.documents.pan?.url">
          <div class="doc-header">
            <i class="fas fa-credit-card"></i> PAN Card
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.pan?.name }}">
              {{ existingFiles.pan?.name || 'pan.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.pan)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.pan)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.pan?.name }}">{{ existingFiles.pan?.name || 'pan.pdf' }}</small>
          </div>
        </div>

        <!-- 10th -->
        <div class="doc-card" *ngIf="candidateDetails.documents.tenth?.url">
          <div class="doc-header">
            <i class="fas fa-certificate"></i> 10th Marksheet
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.tenth?.name }}">
              {{ existingFiles.tenth?.name || '10th.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.tenth)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.tenth)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.tenth?.name }}">{{ existingFiles.tenth?.name || '10th.pdf' }}</small>
          </div>
        </div>

        <!-- 12th -->
        <div class="doc-card" *ngIf="candidateDetails.documents.twelfth?.url">
          <div class="doc-header">
            <i class="fas fa-graduation-cap"></i> 12th / Diploma Marksheet
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.twelfth?.name }}">
              {{ existingFiles.twelfth?.name || '12th.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.twelfth)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.twelfth)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.twelfth?.name }}">{{ existingFiles.twelfth?.name || '12th.pdf' }}</small>
          </div>
        </div>

        <!-- Degree -->
        <div class="doc-card" *ngIf="candidateDetails.documents.degree?.url">
          <div class="doc-header">
            <i class="fas fa-award"></i> Degree Certificate
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.degree?.name }}">
              {{ existingFiles.degree?.name || 'degree.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.degree)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.degree)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.degree?.name }}">{{ existingFiles.degree?.name || 'degree.pdf' }}</small>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== DOCUMENT VIEWER (Approval Mode) ==================== -->
    <div class="form-section" *ngIf="!isEditable && candidateDetails?.documents">
      <h2>Uploaded Documents</h2>
      <div class="documents-grid">

        <!-- Passport Photo -->
        <div class="doc-card" *ngIf="candidateDetails.documents.photo?.url">
          <div class="doc-header">
            <i class="fas fa-user"></i> Passport Size Photo
          </div>
          <div class="doc-body">
            <img [src]="candidateDetails.documents.photo.url" class="photo-preview" alt="Passport Photo">
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.photo)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.photo)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.photo?.name }}">{{ existingFiles.photo?.name || 'photo.jpg' }}</small>
          </div>
        </div>

        <!-- Aadhar Card -->
        <div class="doc-card" *ngIf="candidateDetails.documents.aadhar?.url">
          <div class="doc-header">
            <i class="fas fa-id-card"></i> Aadhar Card
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.aadhar?.name }}">
              {{ existingFiles.aadhar?.name || 'aadhar.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.aadhar)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.aadhar)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.aadhar?.name }}">{{ existingFiles.aadhar?.name || 'aadhar.pdf' }}</small>
          </div>
        </div>

        <!-- PAN Card -->
        <div class="doc-card" *ngIf="candidateDetails.documents.pan?.url">
          <div class="doc-header">
            <i class="fas fa-credit-card"></i> PAN Card
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.pan?.name }}">
              {{ existingFiles.pan?.name || 'pan.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.pan)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.pan)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.pan?.name }}">{{ existingFiles.pan?.name || 'pan.pdf' }}</small>
          </div>
        </div>

        <!-- 10th Marksheet -->
        <div class="doc-card" *ngIf="candidateDetails.documents.tenth?.url">
          <div class="doc-header">
            <i class="fas fa-certificate"></i> 10th Marksheet
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.tenth?.name }}">
              {{ existingFiles.tenth?.name || '10th.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.tenth)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.tenth)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.tenth?.name }}">{{ existingFiles.tenth?.name || '10th.pdf' }}</small>
          </div>
        </div>

        <!-- 12th / Diploma -->
        <div class="doc-card" *ngIf="candidateDetails.documents.twelfth?.url">
          <div class="doc-header">
            <i class="fas fa-graduation-cap"></i> 12th / Diploma Marksheet
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.twelfth?.name }}">
              {{ existingFiles.twelfth?.name || '12th.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.twelfth)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.twelfth)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.twelfth?.name }}">{{ existingFiles.twelfth?.name || '12th.pdf' }}</small>
          </div>
        </div>

        <!-- Degree Certificate -->
        <div class="doc-card" *ngIf="candidateDetails.documents.degree?.url">
          <div class="doc-header">
            <i class="fas fa-award"></i> Degree Certificate (UG/PG)
          </div>
          <div class="doc-body pdf-preview">
            <i class="fas fa-file-pdf"></i>
            <span class="file-name" title="{{ existingFiles.degree?.name }}">
              {{ existingFiles.degree?.name || 'degree.pdf' }}
            </span>
          </div>
          <div class="doc-footer">
            <div class="button-group-left">
              <button type="button" class="btn-view" (click)="openDocument(candidateDetails.documents.degree)">
                <i class="fas fa-eye"></i> View
              </button>
              <button type="button" class="btn-download" (click)="downloadDocument(candidateDetails.documents.degree)">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
            <small title="{{ existingFiles.degree?.name }}">{{ existingFiles.degree?.name || 'degree.pdf' }}</small>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== DOCUMENT PREVIEW MODAL ==================== -->
    <div class="modal-overlay" *ngIf="showDocModal" (click)="closeDocumentModal()">
      <div class="document-modal" *ngIf="showDocModal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>{{ currentDocTitle }}</h3>
          <button class="close-modal" (click)="closeDocumentModal()">Ã—</button>
        </div>
        <div class="modal-body">
          <iframe [src]="currentDocUrl" frameborder="0"></iframe>
        </div>
      </div>
    </div>
  
    <!-- ==================== FORM ACTIONS ==================== -->
    <div class="form-actions">
      <div class="button-group">
        <!-- Submit / Update Button -->
        <button *ngIf="isEditable" type="submit" class="btn-primary">
          {{ mode === 'add' ? 'Submit New Employee' : 'Update Employee' }}
        </button>

        <!-- Verify Button for Approval Mode -->
        <button *ngIf="!isEditable" type="button" (click)="verify()" class="btn-verify">
          Verify & Approve
        </button>

        <button type="button" (click)="cancelAction()" class="btn-cancel">
          CANCEL / CLOSE
        </button>
      </div>
    </div>

  </div>
</form>