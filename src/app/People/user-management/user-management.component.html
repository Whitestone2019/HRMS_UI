<div class="content">
  <h5>USER MANAGEMENT</h5>
  
  <div class="filter-container">
    <div class="radio-group">
      <label>
        <input type="radio" [(ngModel)]="userType" value="employee" (change)="onUserTypeChange()"> Employees
      </label>
      <label>
        <input type="radio" [(ngModel)]="userType" value="trainee" (change)="onUserTypeChange()"> Trainees
      </label>
    </div>
    <div class="filter-inputs">
      <input type="text" placeholder="Search by User ID, Emp ID, or Name" [(ngModel)]="searchQuery" (input)="filterUsers()">
    </div>
  </div>

  <table class="leave-table">
  <thead>
    <tr>
      <th>Profile</th>
      <th>Emp ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Employee Type</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <!-- Employees -->
    <ng-container *ngIf="userType === 'employee' && filteredEmployees.length > 0">
      <tr *ngFor="let employee of paginatedEmployees">
       <td>
      <a href="javascript:void(0)" (click)="openPhotoPopup(employee.empid)">
        {{employee.firstname}} {{employee.lastname}}
      </a>
    </td>
        <td>{{employee.empid || 'N/A'}}</td>
        <td>{{employee.firstname}} {{employee.lastname}}</td>
        <td>{{employee.emailid}}</td>
        <td>{{employee.phonenumber}}</td>
        <td>{{employee.empType || 'N/A'}}</td>
        <td>{{employee.status}}</td>
        <td class="action-buttons">
          <button class="status-btn"
                  [ngClass]="employee.status === 'Active' ? 'reject-btn' : 'approve-btn'"
                  (click)="toggleStatus(employee)">
            {{ employee.status === 'Active' ? 'Deactivate' : 'Activate' }}
          </button>
          <button class="edit-btn" (click)="editUser(employee)">Edit</button>
        </td>
      </tr>
    </ng-container>

    <!-- Trainees -->
    <ng-container *ngIf="userType === 'trainee' && filteredTrainees.length > 0">
      <tr *ngFor="let trainee of paginatedTrainees">
         <td>
      <a href="javascript:void(0)" (click)="openPhotoPopup(trainee.trngid)">
        {{trainee.firstname}} {{trainee.lastname}}
      </a>
    </td>
        <td>{{trainee.trngid || 'N/A'}}</td>
        <td>{{trainee.firstname}} {{trainee.lastname}}</td>
        <td>{{trainee.emailid}}</td>
        <td>{{trainee.phonenumber}}</td>
        <td>{{trainee.empType}}</td>
        <td>{{trainee.status}}</td>
        <td class="action-buttons">
          <button class="status-btn"
                  [ngClass]="trainee.status === 'Active' ? 'reject-btn' : 'approve-btn'"
                  (click)="toggleStatus(trainee)">
            {{ trainee.status === 'Active' ? 'Deactivate' : 'Activate' }}
          </button>
          <button class="edit-btn" (click)="editUser(trainee)">Edit</button>
          <button class="move-btn" (click)="moveToEmployee(trainee)">Move to Emp</button>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>


  <div class="no-data" *ngIf="(userType === 'employee' && filteredEmployees.length === 0) || (userType === 'trainee' && filteredTrainees.length === 0)">
    <img src="https://via.placeholder.com/150" alt="No Data">
    <p>No users found.</p>
  </div>

  <div class="pagination" *ngIf="(userType === 'employee' && filteredEmployees.length > 0) || (userType === 'trainee' && filteredTrainees.length > 0)">
    <button (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
    <span>Page {{currentPage}} of {{totalPages}}</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
  </div>
</div>
