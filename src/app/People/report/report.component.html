<!-- Main Report Table -->
<div class="report-container" *ngIf="!showSingleReport">
  <h1>Monthly Employee Report</h1>

  <div class="dropdown-container">
    <label for="month-select">Select Month:</label>
    <select id="month-select" (click)="$event.stopPropagation()" (change)="onMonthChange($event)">
      <option *ngFor="let month of months" [value]="month.value" [selected]="month.value === selectedMonth">
        {{ month.label }}
      </option>
    </select>
  </div>

  <table class="report-table">
    <thead>
      <tr>
        <th>Employee Name</th>
        <th>ID</th>
        <th>Department</th>
        <th>Days Present</th>
        <th>Leaves Taken</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let employee of employees">
        <td>{{ employee.name }}</td>
        <td>{{ employee.id }}</td>
        <td>{{ employee.department }}</td>
        <td>{{ employee.daysPresent }}</td>
        <td>{{ employee.leavesTaken }}</td>
        <td>
          <button class="action-btn" (click)="viewEmployeeReport(employee)">View Report</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="button-container">
    <button (click)="downloadReport()" class="download-btn">Download Report</button>
    <button (click)="generateLeaveReport()" class="leave-report-btn">Employee Leave Report</button>
  </div>
</div>

<!-- Single Employee Report -->
<div class="single-report-container" *ngIf="showSingleReport">
  <button (click)="backToMainPage()" class="back-btn">Back</button>
  <h2>Employee Report - {{ selectedEmployee.name }} ({{ selectedMonth }})</h2>

  <!-- View Toggle -->
  <div class="view-toggle">
    <button [class.active]="viewMode==='list'" (click)="viewMode='list'">List View</button>
    <button [class.active]="viewMode==='calendar'" (click)="viewMode='calendar'">Calendar View</button>
  </div>

  <!-- List View -->
  <table class="report-table" *ngIf="viewMode==='list'">
    <thead>
      <tr>
        <th>Date</th>
        <th>Status</th>
        <th>Check-In</th>
        <th>Check-Out</th>
        <th>Worked Hours</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let record of employeeReportData">
        <td>{{ record.attendanceDate }}</td>
        <td>{{ record.status }}</td>
        <td>{{ record.checkin }}</td>
        <td>{{ record.checkout }}</td>
        <td>{{ record.totalHoursWorked }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Calendar View -->
  <div class="calendar-container" *ngIf="viewMode==='calendar'">
    <div class="calendar-header">
      <button class="nav-button" (click)="prevMonth()">&#8249;</button>
      <h2>{{ selectedEmployee.name }} - {{ selectedMonth }}</h2>
      <button class="nav-button" (click)="nextMonth()">&#8250;</button>
    </div>

    <div class="calendar-grid">
      <div class="calendar-day" *ngFor="let day of daysOfWeek">{{ day }}</div>
      <div *ngFor="let day of calendarDays" 
           class="calendar-date"
           [ngClass]="{
             'present': day.status==='Present',
             'absent': day.status==='Absent',
             'half-day': day.status==='Half-Day',
             'holiday': day.isSunday
           }">
        <div class="date">{{ day.date }}</div>
        <div class="status">{{ day.status!=='Absent' ? day.status : '' }}</div>
      </div>
    </div>
  </div>

  <div class="button-container">
    <button class="download-btn" (click)="downloadSingleEmployeeReport()">Download Employee Report</button>
    <button class="leave-report-btn" (click)="generateLeaveReport()">Employee Leave Report</button>
  </div>
</div>
