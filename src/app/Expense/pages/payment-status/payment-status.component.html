<div class="advance-container">
    <div *ngIf="showContent">
        <div *ngIf="showPaymentStatusList" class="pending-employees-section">
            <h2 style="text-align: center;">Payment Status</h2>
            <div class="overall-approvals-list">
                <div class="overall-list-header">
                    <span class="overall-list-field">Name</span>
                    <span class="overall-list-field">Employee ID</span>
                    <span class="overall-list-field">Payment Status</span>
                </div>
            </div>
            <div class="overall-approvals-list" style="background: white; flex-direction: column;">

                <div *ngFor="let employee of employeePaymentStatus" class="overall-values-header"
                    (click)="showEmpPaymentStatus(employee)">

                    <!-- Employee Details -->
                    <div class="overall-list-field" style="color: black;">
                        {{ employee?.employeeName }}
                    </div>
                    <div class="overall-list-field" style="color: black;">
                        {{ employee?.empId }}
                    </div>

                    <!-- [ngStyle]="{ 
                        color: employee.paymentStatus === 1 ?
                        'yellow':employee.paymentStatus=== 2? 'green':'orange'
                                }" -->

                    <div class="overall-list-field" style="color: black;">
                        {{employee.paymentStatus === 1 ?
                        'In Progress':employee.paymentStatus=== 2? 'Finished':'Initiated' }}
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="!showPaymentStatusList" class="table-container">
            <div style="flex-direction: row; display: flex; align-items: center;">
                <button (click)="goBack()" class="back-button">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <h2 style="text-align: center; margin: auto;font-size: 24px;">Payment Status</h2>
            </div>
            <!-- Progress Bar Section -->
            <div class="progress-container">
                <!-- Step Labels -->
                <div class="step-labels">
                    <div *ngFor="let step of steps; let i = index" class="step-label"
                        [ngStyle]="{ left: (i * 50) + '%' }" [class.clickable]="isAdmin"
                        (click)="isAdmin && paymentStatusAPI(selectedEmployeePaymentStatus?.expenseId, i)">
                        {{ step }}
                    </div>
                </div>

                <!-- Step Progress Bar -->
                <div class="progress-track">
                    <!-- Segment 1: 0 → 1 -->
                    <div class="progress-segment" [ngStyle]="{
                           width: segment1Width,
                           background: paymentStatus >= 1 ? 'linear-gradient(to right, orange, yellow)' : 'transparent'
                         }">
                    </div>

                    <!-- Segment 2: 1 → 2 -->
                    <div class="progress-segment" [ngStyle]="{
                           width: segment2Width,
                           left: '50%',
                           background: paymentStatus >= 2 ? 'linear-gradient(to right, yellow, green)' : 'transparent'
                         }">
                    </div>

                    <!-- Dots -->
                    <div *ngFor="let step of steps; let i = index" class="step-dot" [ngStyle]="{
                           left: (i * 50) + '%',
                           backgroundColor: getStepColor(i, paymentStatus)
                         }">
                    </div>
                </div>

            </div>

            <div style="display: flex; flex-direction: row;">
                <div style="width: 60%;">
                    <div class="single-item-container">
                        <div class="namimg-field">Date</div>
                        <div class="naming-data">
                            {{ selectedEmployeePaymentStatus?.date | date: 'MMM d,y'}}
                        </div>
                    </div>
                    <div class="single-item-container">
                        <div class="namimg-field">Name</div>
                        <div class="naming-data">{{selectedEmployeePaymentStatus?.employeeName}}</div>
                    </div>
                    <div class="single-item-container">
                        <div class="namimg-field">Employee Id</div>
                        <div class="naming-data">{{selectedEmployeePaymentStatus?.empId}}</div>
                    </div>
                    <div class="single-item-container">
                        <div class="namimg-field">Amount</div>
                        <div class="naming-data">{{selectedEmployeePaymentStatus?.amount}}</div>
                    </div>
                    <div class="single-item-container">
                        <div class="namimg-field">Category</div>
                        <div class="naming-data">{{selectedEmployeePaymentStatus?.category}}</div>
                    </div>
                    <div class="single-item-container">
                        <div class="namimg-field">Description</div>
                        <div class="naming-data">{{selectedEmployeePaymentStatus?.description}}</div>
                    </div>

                </div>
                <div style="flex-direction: column; width: 40%;">
                    <h5 style="text-align: center;">Receipt</h5>
                    <img [src]="uploadedReceipt" alt="Receipt Preview" style="max-width: 100%; height: auto;">
                </div>
            </div>

        </div>
    </div>
</div>